document.addEventListener('DOMContentLoaded', ()=>{ document.getElementById('createForm').addEventListener('submit', async (e)=>{ e.preventDefault(); const form = new FormData(e.target); const res = await fetch('/blogs/api', { method:'POST', body: form, credentials:'same-origin' }); const j = await res.json(); if(j._id) location.href='/post.html?id='+j._id; else document.getElementById('msg').innerText = j.error||'Create failed'; }); });
